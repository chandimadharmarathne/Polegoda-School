<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<title>Live Fund Status</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #000;
  overflow: hidden;
}

/* ===== POSTER ===== */
.poster {
  width: 100vw;
  height: 100vh;
  background-image: url("preview.png");
  background-size: cover;
  background-position: center;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

/* ===== Shape Effect ===== */
.shape-shape {
  position: absolute;
  top: 20px;
  left: 20px;
  width: 510px;
  height: auto;
  z-index: 3;

  animation: logoGlow 2.5s ease-in-out infinite alternate;
}

/* ===== LOGO LIGHTING EFFECT ===== */
.anniversary-logo {
  position: absolute;
  top: 20px;
  left: 20px;
  width: 110px;
  height: auto;
  z-index: 3;

  animation: logoGlow 2.5s ease-in-out infinite alternate;
}

@keyframes logoGlow {
  from {
    filter:
      drop-shadow(0 0 5px rgba(255,215,0,0.3))
      brightness(1);
  }

  to {
    filter:
      drop-shadow(0 0 20px rgba(255,215,0,0.9))
      brightness(1.25);
  }
}

/* ===== OVERLAY ===== */
.overlay {
  background: rgba(0, 0, 0, 0.65);
  padding: 28px 60px;
  border-radius: 22px;
  text-align: center;
  color: #fff;
  max-width: 92%;
  box-shadow: 0 0 45px rgba(0, 0, 0, 0.7);
  z-index: 2;
}

/* ===== LIVE BADGE ===== */
.live-badge {
  display: inline-block;
  font-size: 14px;
  margin-bottom: 14px;
  animation: liveBlink 1.4s infinite;
}

@keyframes liveBlink {
  0%,100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* ===== TEXT ===== */
.title {
  font-size: 32px;
  font-weight: 800;
  margin-bottom: 10px;
}

.subtitle {
  font-size: 20px;
}

/* ===== AMOUNT ===== */
.amount {
  position: relative;
  font-size: 54px;
  font-weight: 900;
  color: #ffd700;
  margin: 30px 0 18px;
  animation: pulse 2.5s infinite;
  text-shadow: 0 0 18px rgba(255, 215, 0, 0.6);
  overflow: hidden;
}

.amount::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    120deg,
    transparent,
    rgba(255,255,255,0.5),
    transparent
  );
  animation: shimmer 3.5s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.06); }
  100% { transform: scale(1); }
}

@keyframes shimmer {
  0% { left: -100%; }
  60% { left: 120%; }
  100% { left: 120%; }
}

.updated {
  font-size: 15px;
  opacity: 0.85;
  margin-top: 10px;
}

/* ===== BUBBLES ===== */
.bubbles {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.bubbles span {
  position: absolute;
  bottom: -60px;
  width: 12px;
  height: 12px;
  background: rgba(255, 255, 255, 0.18);
  border-radius: 50%;
  animation: bubble 18s infinite ease-in;
}

.bubbles span:nth-child(1){ left:10% }
.bubbles span:nth-child(2){ left:25% }
.bubbles span:nth-child(3){ left:50% }
.bubbles span:nth-child(4){ left:70% }
.bubbles span:nth-child(5){ left:90% }

@keyframes bubble {
  0% { transform: translateY(0); opacity:0 }
  10% { opacity:0.3 }
  100% { transform: translateY(-120vh); opacity:0 }
}

@media (max-width:768px){
  .anniversary-logo { width:80px }
  .title { font-size:26px }
  .amount { font-size:44px }
}

</style>
</head>

<body>

<div class="poster">

  <!-- PNG Shape -->
  <img src="100shape.png" class="shape-shape" />

  <!-- PNG Logo -->
  <img src="Anniversary.png" class="anniversary-logo" />

  <div class="bubbles">
    <span></span><span></span><span></span><span></span><span></span>
  </div>

  <div class="overlay">

    <div class="title">
      ðŸŽ“ Polegoda Maha Vidyalaya
    </div>

    <div class="subtitle">
      Live Fund Collection
      <div class="live-badge">ðŸ”´</div>
    </div>

    <div class="amount" id="amount">Loading...</div>
    <div class="updated" id="updated">Loading...</div>

  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore, doc, onSnapshot }
from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSy...",
  authDomain: "polegodaschool.firebaseapp.com",
  projectId: "polegodaschool",
  storageBucket: "polegodaschool.firebasestorage.app",
  messagingSenderId: "1054750888989",
  appId: "1:1054750888989:web:9f50967e156aa9735622f4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const fundRef = doc(db, "fund", "current");

onSnapshot(fundRef, (docSnap) => {
  if (!docSnap.exists()) return;

  const data = docSnap.data();

  document.getElementById("amount").innerText =
    "Rs. " + data.amount.toLocaleString("en-LK") + ".00";

  document.getElementById("updated").innerText =
    "Last updated: " + data.updatedAt.toDate().toLocaleString("en-LK");
});
</script>

</body>
</html>
